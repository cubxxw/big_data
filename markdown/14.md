

# é…ç½®ip

**åœ¨æˆ‘ä»¬å…‹éš†è™šæ‹Ÿæœºåç”Ÿæˆçš„è™šæ‹Ÿæœºçš„IPåœ°å€æ˜¯ä¸€æ ·çš„ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦ä¿®æ”¹æ¯ä¸ªè™šæ‹Ÿæœºçš„IPåœ°å€ä½¿å…¶ä¸ä¸€æ ·**

```
ç¼–è¾‘->è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨->NATæ¨¡å¼->æ›´æ”¹è®¾ç½®->NATæ¨¡å¼->æ”¹å­ç½‘IPä¸ºï¼š
192.1683.121.0
NATè®¾ç½®ï¼šç½‘å…³ä¸º192.168.121.2
DHCPè®¾ç½®æ”¹ä¸º192.168.121.128-192.168.121.254
ç¡®å®š->åº”ç”¨->ç¡®å®š
```

**ä¸»æœºåä¸ipåœ°å€æ˜ å°„é…ç½®(åªæ”¹02å’Œ03ï¼‰**

**é…ç½®ä¸»æœºåï¼š**

```
vim /etc/sysconfig/network æ›´æ”¹hostname 
```

**hostname:æŸ¥çœ‹ä¸»æœºåç§° **

```
vim /etc/hostname 
```

**æŸ¥çœ‹ipåœ°å€å¯é€‰èŒƒå›´ï¼ˆæ¯å°éƒ½è¦æ”¹ï¼‰**

```
Vim /etc/hosts
```

**è¾“å…¥IPä¸ä¸»æœºåçš„æ˜ å°„**

```
192.168.121.134 hadoop01

192.168.121.135 hadoop02

192.168.121.136 hadoop03
```



### çº¢å¸½è¡¥ä¸

#### å®‰è£…epel-release

>å¾ˆå¤šçš„rpmåŒ…åœ¨çº¢å¸½ä¸­æ‰¾ä¸åˆ°ï¼Œæ­¤æ—¶éœ€è¦å®‰è£…epel-release

```
yum install -y epel-release
```



### å…³é—­é˜²ç«å¢™

```
systemctl stop firewalld
systemctl disable firewalld.service
```

# ä¸‰ä¸ªè™šæ‹Ÿæœºçš„é…ç½®

**ä¿®æ”¹å…¶ä»–çš„è™šæ‹ŸæœºIPåœ°å€ï¼Œé¿å…é‡å¤**

```
vim /etc/sysconfig/network-scripts/ifcfg
```

**å°†IPADDRä¿®æ”¹æœ€åçš„æ©ç **

```
hadoop02ä¿®æ”¹ä¸º ï¼š192.168.121.135
Hadoop03ä¿®æ”¹ä¸º ï¼š192.168.121.136
```

**æŸ¥çœ‹ä¸»æœºåç§°**

**æµ‹è¯•hadoop03**

```
[root@hadoop03 ~]# hostname
hadoop03
[root@hadoop03 ~]# ping huya.com
PING huya.com (106.52.191.105) 56(84) bytes of data.
64 bytes from 106.52.191.105 (106.52.191.105): icmp_seq=1 ttl=128 time=19.4 ms
64 bytes from 106.52.191.105 (106.52.191.105): icmp_seq=2 ttl=128 time=19.6 ms
^C
--- huya.com ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 3ms
rtt min/avg/max/mdev = 19.381/19.492/19.604/0.178 ms
```

**æµ‹è¯•hadoop02**

```
[root@hadoop02 ~]# hostname
hadoop02
[root@hadoop02 ~]# ping huya.com
PING huya.com (106.52.191.105) 56(84) bytes of data.
64 bytes from 106.52.191.105 (106.52.191.105): icmp_seq=1 ttl=128 time=19.1 ms
64 bytes from 106.52.191.105 (106.52.191.105): icmp_seq=2 ttl=128 time=19.4 ms
^C
--- huya.com ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 11ms
rtt min/avg/max/mdev = 18.742/19.417/20.117/0.490 ms
```

**æµ‹è¯•hadoop01**

```
[root@hadoop01 ~]# hostname
hadoop01
[root@hadoop01 ~]# hostname
hadoop01
[root@hadoop01 ~]# ping huay.com
PING huay.com (104.18.31.204) 56(84) bytes of data.
64 bytes from 104.18.31.204 (104.18.31.204): icmp_seq=1 ttl=128 time=152 ms
^C
--- huay.com ping statistics ---
2 packets transmitted, 1 received, 50% packet loss, time 2ms
rtt min/avg/max/mdev = 152.067/152.067/152.067/0.000 ms
```

**åˆ†åˆ«å…³é—­é˜²ç«å¢™**

```
systemctl stop firewalld
systemctl disable firewalld.service
```

[toc]

## é›†ç¾¤é…ç½®

### 3.2.4 é›†ç¾¤é…ç½®

### 1ï¼‰é›†ç¾¤éƒ¨ç½²è§„åˆ’

â€‹     **æ³¨æ„ï¼š**

**Ã˜ NameNodeå’ŒSecondaryNameNodeä¸è¦å®‰è£…åœ¨åŒä¸€å°æœåŠ¡å™¨**

**Ã˜ ResourceManagerä¹Ÿå¾ˆæ¶ˆè€—å†…å­˜ï¼Œä¸è¦å’ŒNameNodeã€SecondaryNameNodeé…ç½®åœ¨åŒä¸€å°æœºå™¨ä¸Šã€‚**

|      | hadoop102          | hadoop103                    | hadoop104                              |
| ---- | ------------------ | ---------------------------- | -------------------------------------- |
| HDFS | NameNode  DataNode | DataNode                     | SecondaryNameNode             DataNode |
| YARN | NodeManager        | ResourceManager  NodeManager | NodeManager                            |

### 2ï¼‰é…ç½®æ–‡ä»¶è¯´æ˜

**Hadoopé…ç½®æ–‡ä»¶åˆ†ä¸¤ç±»ï¼šé»˜è®¤é…ç½®æ–‡ä»¶å’Œè‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œåªæœ‰ç”¨æˆ·æƒ³ä¿®æ”¹æŸä¸€é»˜è®¤é…ç½®å€¼æ—¶ï¼Œæ‰éœ€è¦ä¿®æ”¹è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œæ›´æ”¹ç›¸åº”å±æ€§å€¼ã€‚**

**ï¼ˆ1ï¼‰é»˜è®¤é…ç½®æ–‡ä»¶ï¼š**

| è¦è·å–çš„é»˜è®¤æ–‡ä»¶   | æ–‡ä»¶å­˜æ”¾åœ¨Hadoopçš„jaråŒ…ä¸­çš„ä½ç½®                           |
| ------------------ | --------------------------------------------------------- |
| core-default.xml   | hadoop-common-3.1.3.jar/core-default.xml                  |
| hdfs-default.xml   | hadoop-hdfs-3.1.3.jar/hdfs-default.xml                    |
| yarn-default.xml   | hadoop-yarn-common-3.1.3.jar/yarn-default.xml             |
| mapred-default.xml | hadoop-mapreduce-client-core-3.1.3.jar/mapred-default.xml |

**ï¼ˆ2ï¼‰è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼š**

â€‹    **core-site.xmlã€hdfs-site.xmlã€yarn-site.xmlã€mapred-site.xml**å››ä¸ªé…ç½®æ–‡ä»¶å­˜æ”¾åœ¨$HADOOP_HOME/etc/hadoopè¿™ä¸ªè·¯å¾„ä¸Šï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚é‡æ–°è¿›è¡Œä¿®æ”¹é…ç½®ã€‚

### 3ï¼‰é…ç½®é›†ç¾¤

**ï¼ˆ1ï¼‰æ ¸å¿ƒé…ç½®æ–‡ä»¶**

**é…ç½®core-site.xml**

```
 cd $HADOOP_HOME/etc/hadoop

 vim core-site.xml
```

æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

```
<?xml version="1.0" encoding="UTF-8"?>

<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<configuration>

  <!-- æŒ‡å®šNameNodeçš„åœ°å€ -->

  <property>

â€‹    <name>fs.defaultFS</name>

â€‹    <value>hdfs://hadoop102:8020</value>

  </property>


  <!-- æŒ‡å®šhadoopæ•°æ®çš„å­˜å‚¨ç›®å½• -->

  <property>

â€‹    <name>hadoop.tmp.dir</name>

â€‹    <value>/opt/module/hadoop-3.1.3/data</value>

  </property>

 

  <!-- é…ç½®HDFSç½‘é¡µç™»å½•ä½¿ç”¨çš„é™æ€ç”¨æˆ·ä¸ºatguigu -->

  <property>

â€‹    <name>hadoop.http.staticuser.user</name>

â€‹    <value>atguigu</value>

  </property>

</configuration>
```

**ï¼ˆ2ï¼‰HDFSé…ç½®æ–‡ä»¶**

é…ç½®hdfs-site.xml

```
# vim hdfs-site.xml
```

æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

```
<?xml version="1.0" encoding="UTF-8"?>

<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

 

<configuration>

  <!-- nn webç«¯è®¿é—®åœ°å€-->

  <property>

â€‹    <name>dfs.namenode.http-address</name>

â€‹    <value>hadoop102:9870</value>

  </property>

  <!-- 2nn webç«¯è®¿é—®åœ°å€-->

  <property>

â€‹    <name>dfs.namenode.secondary.http-address</name>

â€‹    <value>hadoop104:9868</value>

  </property>

</configuration>
```

ï¼ˆ3ï¼‰YARNé…ç½®æ–‡ä»¶

é…ç½®yarn-site.xml

```
# vim yarn-site.xml
```

æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

```
<?xml version="1.0" encoding="UTF-8"?>

<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

 

<configuration>

  <!-- æŒ‡å®šMRèµ°shuffle -->

  <property>

â€‹    <name>yarn.nodemanager.aux-services</name>

â€‹    <value>mapreduce_shuffle</value>

  </property>

 

  <!-- æŒ‡å®šResourceManagerçš„åœ°å€-->

  <property>

â€‹    <name>yarn.resourcemanager.hostname</name>

â€‹    <value>hadoop103</value>

  </property>

 

  <!-- ç¯å¢ƒå˜é‡çš„ç»§æ‰¿ -->

  <property>

â€‹    <name>yarn.nodemanager.env-whitelist</name>

â€‹    <value>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME</value>

  </property>

</configuration>
```

**ï¼ˆ4ï¼‰MapReduceé…ç½®æ–‡ä»¶**

é…ç½®mapred-site.xml

```
 vim mapred-site.xml
```

æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

```
<?xml version="1.0" encoding="UTF-8"?>

<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<configuration>

  <!-- æŒ‡å®šMapReduceç¨‹åºè¿è¡Œåœ¨Yarnä¸Š -->

  <property>

â€‹    <name>mapreduce.framework.name</name>

â€‹    <value>yarn</value>

  </property>

</configuration>
```

**4ï¼‰åœ¨é›†ç¾¤ä¸Šåˆ†å‘é…ç½®å¥½çš„Hadoopé…ç½®æ–‡ä»¶**

```
xsync /opt/module/hadoop-3.1.3/etc/hadoop/
```

**5ï¼‰å»103å’Œ104ä¸ŠæŸ¥çœ‹æ–‡ä»¶åˆ†å‘æƒ…å†µ**

```
cat /opt/module/hadoop-3.1.3/etc/hadoop/core-site.xml

cat /opt/module/hadoop-3.1.3/etc/hadoop/core-site.xml
```

[toc]

# é…ç½®ssh

###  æ£€æŸ¥æ˜¯å¦å®‰è£…ssh

![image-20220327220936458](https://s2.loli.net/2022/03/27/A4H1ZFGQNrm8oVn.png)



### æŸ¥çœ‹æœåŠ¡æ˜¯å¦å¯åŠ¨

**è‹¥æ²¡æœ‰å®‰è£…åˆ™ä½¿ç”¨yum install openssh-server  å®‰è£…**

![image-20220327221026234](https://s2.loli.net/2022/03/27/aA6d27ri1M3jksP.png)

----


``` 
ssh-copy-id hadoop02
```

**æ‹·è´åˆ°02ï¼Œå®ç°å…å¯†ç™»é™†**

```
[root@mail ~]# cd /root/.ssh/
[root@mail .ssh]# ll
total 16
-rw------- 1 root root  571 Mar 27 14:05 authorized_keys
-rw------- 1 root root 2655 Mar 27 14:06 id_rsa
-rw-r--r-- 1 root root  573 Mar 27 14:06 id_rsa.pub
-rw-r--r-- 1 root root  942 Mar 27 14:05 known_hosts
```

1. authorized_keysï¼šæˆæƒçš„å¯¹è±¡
2. id_rsa ï¼šç§é’¥
3. id_rsa.pub:å…¬é’¥



###  sshå…å¯†ç™»é™†

**ç¬¬ä¸€æ­¥ï¼šåœ¨ä¸‰å°æœºå™¨ä¸Šæ‰§è¡Œä¸€ä¸‹å‘½ä»¤ç”Ÿæˆå…¬é’¥å’Œç§é’¥**

```
Hadoop01:   ssh-keygen   -t  rsa
æŸ¥çœ‹å¯†é’¥å¯¹:	 cd  .ssh/     ->ls
```


**ç¬¬äºŒæ­¥ï¼šæ‹·è´å…¬é’¥åˆ°åŒä¸€å°æœºå™¨ï¼ŒåŠå°†3ä¸ªå…¬é’¥æ‹·è´åˆ°hadoop01ä¸Š**

```
Hadoop01:  ssh-copy-id   hadoop01     ->yes->è¾“å…¥01çš„å¯†ç 
```

**ç¬¬ä¸‰éƒ¨ï¼šå¤åˆ¶ç¬¬ä¸€èƒæœºå™¨çš„å…¬é’¥åˆ°å…¶ä»–æœºå™¨**

```
Hadoop01:  scp   /root/.ssh/authorized_keys   hadoop02:/root/.ssh   ->yes->è¾“å¯†ç 
           scp   /root/.ssh/authorized_keys   hadoop03:/root/.ssh   ->yes->è¾“å¯†ç 
```

**ç¬¬å››æ­¥ï¼šæµ‹è¯•**

```
Hadoop01:   ssh  hadoop02    é“¾æ¥hadoop02   exité€€å‡º
```

è¯·ä¾æ¬¡åœ¨3å°æœºå™¨ä¸Šæµ‹è¯•



**æˆ‘ä»¬å…ˆé…ç½®hadoop01**

```
ssh-keygen   -t  rsa
```

![image-20220328171439562](https://s2.loli.net/2022/03/28/Y3dpCFiJSBLTOUG.png)



**æ­¤æ—¶æˆ‘ä»¬å¯ä»¥åœ¨rootä¸‹é¢æ‰¾åˆ°sshæ–‡ä»¶**

```
[root@hadoop01 .ssh]# pwd
/root/.ssh
[root@hadoop01 .ssh]# ls
id_rsa  id_rsa.pub        
```

**æˆ‘ä»¬éœ€è¦å°†å…¬é’¥æ‹·è´åˆ°ssh**

```
ssh-copy-id   hadoop02  
```

![image-20220328171823862](https://s2.loli.net/2022/03/28/EfuprIhmqM6KgAW.png)

```
ssh-copy-id   hadoop03   
```

**æˆ‘ä»¬ä½¿ç”¨sshç™»é™†ï¼Œä¸éœ€è¦å¯†ç **

```
[root@hadoop01 .ssh]# ssh root@hadoop02
Activate the web console with: systemctl enable --now cockpit.socket

Last login: Mon Mar 28 01:58:36 2022 from 192.168.121.5
[root@hadoop02 ~]# 
```

---

> ç»§ç»­åˆ†åˆ«é…ç½®å…å¯†ç™»å½•ï¼Œæ­¥éª¤é‡å¤
>
> æ³¨æ„ï¼šè¿™ä¸ªæ˜¯é’ˆå¯¹æˆ‘ä»¬çš„ç”¨æˆ·çš„ï¼Œå…¶ä»–ç”¨æˆ·è¿˜æ˜¯éœ€è¦å¯†ç 

**æ­¤æ—¶æˆ‘ä»¬åœ¨ä»»ä½•ä¸€å°ä¸»æœºéƒ½å¯ä»¥æ“æ§**



[toc]

[ğŸ˜¶â€ğŸŒ«ï¸hadoopå®˜æ–¹ç¼–ç¨‹æŒ‡å—](https://hadoop.apache.org)

>   å®˜æ–¹æ–‡æ¡£å­¦ä¹ ç¬”è®°å¾ˆå…¨ï¼Œæ¨èå»å®˜ç½‘å­¦ä¹ 

ğŸ˜¶â€ğŸŒ«ï¸[æˆ‘çš„å­¦ä¹ ç¬”è®°ï¼šgithub](https://github.com/3293172751/CS_COURSE)

---

**åŒºå—é“¾æŠ€æœ¯ï¼ˆä¹Ÿç§°ä¹‹ä¸ºåˆ†å¸ƒå¼è´¦æœ¬æŠ€æœ¯ï¼‰**ï¼Œæ˜¯ä¸€ç§äº’è”ç½‘æ•°æ®åº“æŠ€æœ¯ï¼Œå…¶ç‰¹ç‚¹æ˜¯å»ä¸­å¿ƒåŒ–ï¼Œå…¬å¼€é€æ˜ï¼Œè®©æ¯ä¸€ä¸ªäººå‡å¯å‚ä¸çš„æ•°æ®åº“è®°å½•

>   â¤ï¸ğŸ’•ğŸ’•å…³äºåŒºå—é“¾æŠ€æœ¯ï¼Œå¯ä»¥å…³æ³¨æˆ‘ï¼Œå…±åŒå­¦ä¹ æ›´å¤šçš„åŒºå—é“¾æŠ€æœ¯ã€‚åšå®¢[http://nsddd.top](

# hadoopè¿è¡Œæ¨¡å¼

![image-20220327122341782](https://s2.loli.net/2022/03/27/BUyhRuJ3QztMirf.png)

## å®Œå…¨åˆ†å¸ƒå¼æ­å»ºï¼ˆé‡ç‚¹ï¼‰

**åˆ†ææ­¥éª¤**

1. å®‰è£…ä¸‰å°è™šæ‹Ÿæœºï¼ˆå…³é—­é˜²ç«å¢™ã€é™æ€ipã€ä¸»æœºåç§°ï¼‰
2. å®‰è£…jdk
3. é…ç½®ç¯å¢ƒå˜é‡
4. å®‰è£…hadoop
5. é…ç½®ç¯å¢ƒå˜é‡
6. é…ç½®é›†ç¾¤
7. å•ç‚¹å¯åŠ¨
8. é…ç½®ssh
9. ç¾¤èµ·å¹¶æµ‹è¯•é›†ç¾¤



> ä¸‰å°æœåŠ¡å™¨æœ‰ä¸€å°å®‰è£…äº†gdkå’Œhadoopæ­¤æ—¶æˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œå°†æœåŠ¡å™¨ä¸­çš„ç¨‹åºæ‹·è´

### scpå®ç°å®‰å…¨æ‹·è´

**scpå®ç°æœåŠ¡å™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„å®Œå…¨æ•°æ®æ‹·è´**

**åŸºæœ¬è¯­æ³•**

```
scp -r atguigu@hadoop01:/opt/module/* atguigu@hadoop02:/opt/module
```

**å³ä½¿æ˜¯03ä¸»æœºï¼Œä¹Ÿå¯ä»¥é€šè¿‡scpå°†01æ–‡ä»¶æ‹·è´åˆ°02æ–‡ä»¶**



### rsyncè¿œç¨‹åŒæ­¥å·¥å…·

**rsyncä¸»è¦ç”¨äºå¤‡ä»½å’Œé•œåƒï¼Œå…·æœ‰é€Ÿåº¦å¿«ã€é¿å…ç›¸åŒå†…å®¹å’Œæ”¯æŒç¬¦å·é“¾æ¥çš„ä¼˜ç‚¹**

> ç›¸æ¯”è¾ƒscp,rsyncé€Ÿåº¦æ›´å¿«ï¼Œåªå¯¹å·®å¼‚æ–‡ä»¶åšæ›´æ–°

**ç¬¬ä¸€æ¬¡åŒæ­¥ç­‰åŒäºæ‹·è´**

**åŸºæœ¬è¯­æ³•**

```
rsync -av atguigu@hadoop01:/opt/module atguigu@hadoop02:/opt/module
```



##  xsyncé›†ç¾¤åˆ†å‘è„šæœ¬

**å¾ªç¯å¤åˆ¶æ–‡ä»¶åˆ°æ‰€æœ‰èŠ‚ç‚¹çš„ç›¸åŒè·¯å¾„ä¸‹**

**åŸå§‹å‘½ä»¤**

```
xsync -av /opt/module atguigu@hadoop02:/opt/module
```

**éœ€æ±‚åˆ†æï¼š**

```
xsync åŒæ­¥file 
```

> é‚£ä¹ˆæˆ‘ä»¬éœ€è¦å»é…ç½®å®ƒçš„ç¯å¢ƒå˜é‡

